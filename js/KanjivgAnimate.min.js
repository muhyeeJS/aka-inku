"use strict";var KanjivgAnimate=function(){function t(t,e){e="undefined"!=typeof e?e:500,this.setOnClick(t,e)}return t.prototype.setOnClick=function(t,e){for(var i=document.querySelectorAll(t),n=i.length,s=0;n>s;s++)i[s].onclick=function(){var t=new KVGAnimator(e);return t.play(this),!1}},t}(),KVGAnimator=function(){function t(t){this.time=t}return t.prototype.play=function(t){var e=this.findTarget(t);if(e&&"svg"===e.tagName&&!(e.querySelectorAll("path")<=0)){this.paths=e.querySelectorAll("path"),this.numbers=e.querySelectorAll("text"),this.pathCount=this.paths.length,this.hideAll(),this.count=0;var i=this.paths[this.count],n=this.numbers[this.count];this.animatePath(i,n)}},t.prototype.findTarget=function(t){var e="data-kanjivg-target";if(!t.hasAttribute(e))return t;var i=t.getAttribute(e);return document.querySelector(i)},t.prototype.hideAll=function(){for(var t=0;t<this.pathCount;t++)this.paths[t].style.display="none","undefined"!=typeof this.numbers[t]&&(this.numbers[t].style.display="none")},t.prototype.animatePath=function(t,e){this.length=t.getTotalLength(),t.style.display="block","undefined"!=typeof e&&(e.style.display="block"),t.style.transition=t.style.WebkitTransition="none",t.style.strokeDasharray=this.length+" "+this.length,t.style.strokeDashoffset=this.length,t.getBoundingClientRect(),this.interval=this.time/this.length,this.doAnimation(t)},t.prototype.doAnimation=function(t){var e=setTimeout(function(){this.doAnimation(t)}.bind(this,t),this.interval);if(t.style.strokeDashoffset=this.length,this.length--,this.length<0&&(clearInterval(e),this.count+=1,this.count<this.pathCount)){var i=this.paths[this.count],n=this.numbers[this.count];this.animatePath(i,n)}},t}();module.exports=KanjivgAnimate;